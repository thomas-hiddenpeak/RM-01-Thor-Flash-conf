# SPDX-FileCopyrightText: Copyright (c) 2026 Your Company. All rights reserved.
# SPDX-License-Identifier: BSD-3-Clause

# rm01-thor.conf: configuration for RM01-Thor custom carrier board
# Based on: jetson-agx-thor-devkit (P3834-0008 + P4071)
# 
# Hardware: RM01-Thor carrier + P3834-0008 SoM (128GB)
# Features: NVMe, PCIe NIC, UART, USB (no audio, no display - headless)
#
# Usage:
#   sudo ./flash.sh rm01-thor internal
#   sudo ./tools/kernel_flash/l4t_initrd_flash.sh rm01-thor internal

# Source the devkit configuration (reuse all settings)
source "${LDK_DIR}/jetson-agx-thor-devkit.conf";

# ============================================================================
# RM01-Thor specific overrides
# ============================================================================

# CRITICAL: Use custom MB2 BCT that disables CVB EEPROM check
# RM01-Thor carrier board does not have EEPROM chip
MB2_BCT="tegra264-mb2-bct-misc-p3834-0008-rm01.dts";

# Use custom device tree for RM01-Thor
# - Disables CAN controllers (eliminates FSI fabric timeout errors)
# - Disables audio subsystem (headless)
# - Disables 10GbE MGBE (using PCIe NIC)
# - Disables display/DCE
# - Keeps: NVMe, PCIe, USB, UART
DTB_FILE="tegra264-rm01-thor.dtb";
TBCDTB_FILE="${DTB_FILE}";

# Use minimal NVMe partition layout (ESP + APP only)
# Removes: recovery, A/B redundancy, UDA, reserved
EXTERNAL_PT_LAYOUT="tools/kernel_flash/flash_l4t_t264_nvme_minimal.xml";

# Uncomment to use custom BPMP DTB when available:
# BPFDTB_FILE="tegra264-bpmp-3834-0008-rm01-xxxx.dtb";

# Uncomment to use custom pinmux when available:
# PINMUX_CONFIG="tegra264-mb1-bct-pinmux-p3834-xxxx-rm01.dts";

# Uncomment to use custom GPIO config when available:
# GPIO_CONFIG="tegra264-mb1-bct-gpio-p3834-xxxx-rm01.dts";

# Uncomment to add custom kernel cmdline options:
# CMDLINE_ADD+=" console=ttyTCU0,115200"

# Uncomment for custom overlay DTB:
# OVERLAY_DTB_FILE+=",tegra264-rm01-custom.dtbo";
